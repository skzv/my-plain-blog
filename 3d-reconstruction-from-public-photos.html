<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1" /> <meta property="og:image" content="https://blog.skz.dev/assets/img/3d-reconstruction/3d-reconstruction-preview.png"> <meta name="twitter:image" content="https://blog.skz.dev/assets/img/3d-reconstruction/3d-reconstruction-preview.png"> <meta name="author" content="Sasha Kuznetsov"> <title>3D Reconstruction From Public Photos with Machine Learning · Sasha Kuznetsov's Blog</title> <meta property="og:title" content="3D Reconstruction From Public Photos with Machine Learning · Sasha Kuznetsov's Blog"> <meta name="twitter:title" content="3D Reconstruction From Public Photos with Machine Learning · Sasha Kuznetsov's Blog"> <meta name="description" content=" Can we reconstruct the world from public photos?"> <meta property="og:description" content=" Can we reconstruct the world from public photos?"> <meta name="twitter:description" content=" Can we reconstruct the world from public photos?"> <link rel="icon" href="https://blog.skz.dev/assets/img/favicon.png"> <link rel="apple-touch-icon" href="https://blog.skz.dev/assets/img/favicon.png"> <link rel="stylesheet" href="https://blog.skz.dev/assets/css/core.css"> <link rel="canonical" href="https://blog.skz.dev/3d-reconstruction-from-public-photos"> <link rel="alternate" type="application/atom+xml" title="Sasha Kuznetsov's Blog" href="https://blog.skz.dev/feed.xml" /> <script src="/assets/js/load-mathjax.js" async></script> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:creator" content="@skzv"> </head> <body> <aside class="logo"> <a href="https://blog.skz.dev/" aria-label="My avatar"> <img src="https://avatars.githubusercontent.com/u/11140296?v=4" alt="Me!" class="logo-avatar"> </a> <span class="logo-prompt code">Back to Index</span> </aside> <div id="content"> <article> <div class="center"> <h1 class="title">3D Reconstruction From Public Photos with Machine Learning</h1> <time class="code">August 21, 2025</time> </div> <div class="divider"></div> <p class="description"> Can we reconstruct the world from public photos? </p> <h4 id="mapping-the-world">Mapping the World</h4> <p>The internet provides an abundance of public photos from various sources: Reddit, Youtube, Google Maps photo uploads, and so forth.</p> <p><img src="/assets/img/3d-reconstruction/google-maps-photos.png" alt="Google Maps Photos Example" height="400px" /></p> <p class="caption"> Public photos available on Google Maps </p> <p>I wondered: is it possible to create a 3D map of the world from all this data? Cameras remove all the 3D information when the photo is taken - but using state of the art machine learning, we can bring it back, and turn a photo like this:</p> <p><img src="/assets/img/3d-reconstruction/safeway-1.webp" alt="Safeway Input Image 0" /></p> <p class="caption"> Public Safeway input image 0. </p> <p>Into a 3D model like this:</p> <div style="text-align: center;"> <video autoplay="" loop="" muted="" playsinline="" disableRemotePlayback="" style="width: 100%; height: auto;"> <source src="assets/video/3d-reconstruction/safeway-1-recording.mp4" type="video/mp4" /> Your browser does not support the video tag. </video> </div> <p>Another example, from the famous Singapore Airport:</p> <p><img src="/assets/img/3d-reconstruction/sg-airport-0.jpeg" alt="SG Airport Input Image" height="600px" /></p> <p class="caption"> Public SG Airport input image. </p> <div style="text-align: center;"> <video autoplay="" loop="" muted="" playsinline="" disableRemotePlayback="" style="width: 100%; height: auto;"> <source src="assets/video/3d-reconstruction/sg-airport-recording.mp4" type="video/mp4" /> Your browser does not support the video tag. </video> </div> <p>And even an image of a forest:</p> <p><img src="/assets/img/3d-reconstruction/forest-0.jpg" alt="Forest Input Image" /></p> <p class="caption"> Public Forest input image. </p> <div style="text-align: center;"> <video autoplay="" loop="" muted="" playsinline="" disableRemotePlayback="" style="width: 100%; height: auto;"> <source src="assets/video/3d-reconstruction/forest-recording.mp4" type="video/mp4" /> Your browser does not support the video tag. </video> </div> <p>To achieve this, I used an ML depth model and some linear algebra.</p> <h3 id="camera-projection">Camera Projection</h3> <p>We can consider a camera as performing a projection from 3D to 2D, as in the image below. This removes information about the 3rd dimension: depth.</p> <p><img src="/assets/img/3d-reconstruction/camera-projection.png" alt="Camera Projection Visualization" /></p> <p class="caption"> Camera projection from 3D to 2D. Source: [1] </p> <p>Our task is to recover this 3rd dimension, and then figure out how to undo this projection.</p> <h3 id="camera-intrinsics">Camera Intrinsics</h3> <p>It is not sufficient to know the depth for every pixel in the image to reconstruct it in 3D. This is because the properties of the camera - most importantly the focal length - determine how points in 3D get mapped to pixels in 2D, and so to undo this mapping, we need to have these properties of the camera. Consider the demonstration of this below, where different focal lengths produce significantly different images:</p> <p><img src="/assets/img/3d-reconstruction/face-focal-length.gif" alt="Face vs Focal Length Demonstration" height="400px" /></p> <p class="caption"> A demonstration of the effect of focal length on image. Source: [2] </p> <p>Logically it follows that if we want to reconstruct the face in 3D from any of these images, we need to know the camera properties.</p> <p>Using properties of similar triangles shown below, it can be seen that the relation between the image points and the 3D points are simple:</p> <div style="width: 100%; overflow-x: auto;"> $$ \begin{align} x = f \frac{X}{Z} \space\space\space\space\space y = f \frac{Y}{Z} \tag{1} \label{eq:camera perspective projection} \end{align} $$ </div> <p><img src="/assets/img/3d-reconstruction/camera-perspective-focal.png" alt="Camera Perspective Projection" /></p> <p class="caption"> Camera Perspective Projection </p> <p>Reversing this transformation to map image points back to 3D, we find:</p> <div style="width: 100%; overflow-x: auto;"> $$ \begin{align} X = \frac{x \cdot Z}{f} \space\space\space\space\space Y = \frac{y \cdot Z}{f} \space\space\space\space\space Z = Z \tag{2} \label{eq:inverse camera perspective projection} \end{align} $$ </div> <p>So, the two missing pieces we need are the depth at each pixel, \(Z\), and the focal length of the camera, \(f\). Neither of these are immediately available from public photos. The EXIF data, which may have camera information, is typically removed.</p> <p>Note, it’s also possible to describe the full transformation between 3D and 2D coordinate frames, taking into account the camera’s pose, shown below. But for the purpose of this article, we just consider the camera’s local coordinate frame.</p> <p><img src="/assets/img/3d-reconstruction/complete-camera-model.jpg" alt="Complete Camera Model" /></p> <p class="caption"> Complete Camera Model. Source: [3] </p> <h3 id="depth-masks">Depth Masks</h3> <p>Apple’s recently released <a href="https://github.com/apple/ml-depth-pro">DepthPro model</a> made this project possible. While depth models have existed for a long time, I noticed this model was different in two ways: 1. It provided depth in an absolute, metric scale, which meant 3D reconstructions would actually have metric proportions, even when generated from a single mono image 2. It estimated the focal length of the camera for me</p> <p><img src="/assets/img/3d-reconstruction/depth-pro-teaser.jpg" alt="Depth Pro Teaser" /></p> <p class="caption"> Depth Pro Teaser. Source: [4] </p> <p>I ran this model on a bunch of public photos, estimating the depth masks and focal lengths, as shown below. For example, for this image:</p> <p><img src="/assets/img/3d-reconstruction/safeway-1.webp" alt="Safeway Input Image 1" /></p> <p class="caption"> Public Safeway input image 1. </p> <p>The corresponding estimated depth mask and focal length are:</p> <p><img src="/assets/img/3d-reconstruction/safeway-1-depth-black.png" alt="Safeway depth mask 1" /></p> <p class="caption"> Safeway depth mask 1 and focal length predicted by the DepthPro model. </p> <p>I then used equations \((2)\) to map each pixel back into 3D, created a point cloud, and then visualized it with Open3D:</p> <div style="text-align: center;"> <video autoplay="" loop="" muted="" playsinline="" disableRemotePlayback="" style="width: 100%; height: auto;"> <source src="assets/video/3d-reconstruction/safeway-1-recording.mp4" type="video/mp4" /> Your browser does not support the video tag. </video> </div> <h3 id="3d-reconstruction">3D Reconstruction</h3> <p>Check out all my examples, below. Notably, check out the NYC skyline example. I was curious to see how well it would work on a huge scene, like the skyline of NYC. As expected, the depth pro model did not produce a good depth mask. The training dataset almost certainly focused on smaller scales.</p> <h4 id="coex-mall">COEX Mall</h4> <p><img src="/assets/img/3d-reconstruction/coex-0.jpg" alt="Coex Mall Input Image" /></p> <p class="caption"> Public COEX Mall input image. </p> <p><img src="/assets/img/3d-reconstruction/coex-0-depth-black.png" alt="Coex Mall depth mask" /></p> <p class="caption"> COEX Mall depth mask and focal length predicted by the DepthPro model. </p> <div style="text-align: center;"> <video autoplay="" loop="" muted="" playsinline="" disableRemotePlayback="" style="width: 100%; height: auto;"> <source src="assets/video/3d-reconstruction/coex-recording.mp4" type="video/mp4" /> Your browser does not support the video tag. </video> </div> <div class="divider"></div> <h4 id="forest">Forest</h4> <p><img src="/assets/img/3d-reconstruction/forest-0.jpg" alt="Forest Input Image" /></p> <p class="caption"> Public Forest input image. </p> <p><img src="/assets/img/3d-reconstruction/forest-0-depth-black.png" alt="Forest depth mask" /></p> <p class="caption"> Forest depth mask and focal length predicted by the DepthPro model. </p> <div style="text-align: center;"> <video autoplay="" loop="" muted="" playsinline="" disableRemotePlayback="" style="width: 100%; height: auto;"> <source src="assets/video/3d-reconstruction/forest-recording.mp4" type="video/mp4" /> Your browser does not support the video tag. </video> </div> <div class="divider"></div> <h4 id="nyc-skyline">NYC Skyline</h4> <p><img src="/assets/img/3d-reconstruction/nyc-0.jpg" alt="NYC Input Image" /></p> <p class="caption"> Public NYC input image. </p> <p><img src="/assets/img/3d-reconstruction/nyc-depth-black.png" alt="NYC depth mask" /></p> <p class="caption"> NYC depth mask and focal length predicted by the DepthPro model. </p> <div style="text-align: center;"> <video autoplay="" loop="" muted="" playsinline="" disableRemotePlayback="" style="width: 100%; height: auto;"> <source src="assets/video/3d-reconstruction/nyc-recording.mp4" type="video/mp4" /> Your browser does not support the video tag. </video> </div> <div class="divider"></div> <h4 id="safeway-1">Safeway 1</h4> <p><img src="/assets/img/3d-reconstruction/safeway-0.webp" alt="Safeway Input Image 0" /></p> <p class="caption"> Public Safeway input image 0. </p> <p><img src="/assets/img/3d-reconstruction/safeway-0-depth-black.png" alt="Safeway depth mask 0" /></p> <p class="caption"> Safeway depth mask 0 and focal length predicted by the DepthPro model. </p> <div style="text-align: center;"> <video autoplay="" loop="" muted="" playsinline="" disableRemotePlayback="" style="width: 100%; height: auto;"> <source src="assets/video/3d-reconstruction/safeway-0-recording.mp4" type="video/mp4" /> Your browser does not support the video tag. </video> </div> <div class="divider"></div> <h4 id="safeway-2">Safeway 2</h4> <p><img src="/assets/img/3d-reconstruction/safeway-1.webp" alt="Safeway Input Image 1" /></p> <p class="caption"> Public Safeway input image 1. </p> <p><img src="/assets/img/3d-reconstruction/safeway-1-depth-black.png" alt="Safeway depth mask 1" /></p> <p class="caption"> Safeway depth mask 1 and focal length predicted by the DepthPro model. </p> <div style="text-align: center;"> <video autoplay="" loop="" muted="" playsinline="" disableRemotePlayback="" style="width: 100%; height: auto;"> <source src="assets/video/3d-reconstruction/safeway-1-recording.mp4" type="video/mp4" /> Your browser does not support the video tag. </video> </div> <div class="divider"></div> <h4 id="singapore-airport">Singapore Airport</h4> <p><img src="/assets/img/3d-reconstruction/sg-airport-0.jpeg" alt="SG Airport Input Image" height="600px" /></p> <p class="caption"> Public SG Airport input image. </p> <p><img src="/assets/img/3d-reconstruction/sg-airport-0-depth-black.png" alt="SG Airport depth mask" /></p> <p class="caption"> SG Airport depth mask and focal length predicted by the DepthPro model. </p> <div style="text-align: center;"> <video autoplay="" loop="" muted="" playsinline="" disableRemotePlayback="" style="width: 100%; height: auto;"> <source src="assets/video/3d-reconstruction/sg-airport-recording.mp4" type="video/mp4" /> Your browser does not support the video tag. </video> </div> <div class="divider"></div> <h4 id="footnotes">Footnotes</h4> <ol> <li>Camera projection from 3D to 2D. Source: <a href="https://www.researchgate.net/figure/The-perspective-projection-of-a-camera-model_fig2_324584663">ResearchGate</a></li> <li>A demonstration of the effect of focal length on image. Source: <a href="https://www.diyphotography.net/gif-explains-changing-focal-length-impacts-portrait">DIY Photography</a></li> <li>Complete Camera Model. Source: <a href="https://robotacademy.net.au/lesson/summary-of-image-geometry/">Robot Academy</a></li> <li>Depth Pro Teaser. Source: <a href="https://github.com/apple/ml-depth-pro">Apple</a></li> </ol> <script src="https://cdn.plot.ly/plotly-2.4.2.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.5.1/math.js" integrity="sha512-AfRcJIj922x/jSJpQLnry0DYIBg6EGCtwk/MiQ6QvDlzb7kNFxH8EdqXLkaXXY3YHQS9FrSb8H7LzuLn0CZQ1A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> </article> <div class="page-navigation code"> <a class="home" href="https://blog.skz.dev/" title="Back to Index">Index</a> <span> &middot; </span> <a class="prev" href="https://blog.skz.dev/predicting-how-the-market-will-open-tomorrow" title="PREV: Predicting How the Market Will Open Tomorrow">&gt;&gt;</a> </div> </div> <div class="footer"> <span class="block">&copy; 2025 Sasha Kuznetsov</span> <!-- <span class="block"><small>&lt;/&gt; Powered by <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://github.com/heiswayi/the-plain">The Plain theme</a>.</small></span> --> </div> <script async defer src="https://api.skz.dev/latest.js"></script> <noscript><img src="https://api.skz.dev/noscript.gif" alt="" referrerpolicy="no-referrer-when-downgrade" /></noscript> <!-- <script async defer data-domain="blog.skz.dev" src="https://a-api.skz.dev/js/index.js"></script> --> </body> </html>
